// Collatz iteration in e4
// Usage: ./e4peg examples/collatz.e4 <n>
// Demonstrates: pattern matching on values

n := arg1

loop {
  print n
  case n {
    1 -> { break }
    _ -> {
      case n % 2 {
        0 -> { n := n / 2 }
        _ -> { n := 3 * n + 1 }
      }
    }
  }
}
